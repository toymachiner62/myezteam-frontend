<div id="page-wrapper">
	<div class="row">
		<div class="col-lg-12">
			<h1>Team {{team.name}}</h1>
            <ol class="breadcrumb">
              <li><a href="index.html">Dashboard</a></li>
              <li class="active">{{team.name}}</li>
            </ol>
            
			<div class="alert alert-success" ng-show="success != null">
				{{success}}
			</div>
			
			<div class="alert alert-danger" ng-show="error != null">
				{{error}}
			</div>
			
		</div>
	</div><!-- /.row -->
	
	<div class="modal" id="loadingWidget" style="position:absolute; top: 45%;" >
        <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-body">
                <div id="loadingWidget" class="row-fluid ui-corner-all" style="padding: 0 .7em;">
                    <div class="loadingContent">
                        <p>
                            <i class="fa fa-spinner fa-spin fa-2x"></i> Working..
                        </p>
                    </div>
                </div>
              </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->

	<div class="row">

	    <div class="col-lg-12" >
		    <tabset>
		    
                <tab heading="Team Info">
                    <div class="col-lg-6" ng-show="team.name != null">
			            <div class="panel panel-info">
				            <div class="panel-heading">
					            <!-- <div ng-repeat="team in teams.owner">
					            	<button class="btn btn-danger btn-xs pull-right" type="button" ng-show="profile.id == team.owner_id && team.id == teamId" ng-click="deleteTeam(team.id)">Delete Team</button>
					            </div> -->
                	            <h3 class="panel-title">Team Info</h3>
				            </div>
              	            <div class="panel-body">
					            <div class="list-group" ng-mouseenter="hover(team)" ng-mouseleave="hover(team)">
					                
					                <!-- Edit button when hovered -->
                                    <a class="btn btn-default btn-xs pull-right" href="#/teams/{{team.id}}/edit" ng-show="(is_owner(team.owner_id, profile.id) || is_manager(team, profile.id)) && team.showDelete">
                                        <i class="fa fa-pencil"></i> Edit
                                    </a>
					            
                		            <h3>{{team.name}}</h3>
                		            <p><strong>Type:</strong> {{team.type}}</p>
                                    <p><strong>Default Location:</strong> {{team.default_location}}</p>
                                    <p><strong>Description:</strong> {{team.description}}</p>
                                    <p><strong>Owner:</strong> {{team_owner}}</p>
                                    <p><strong>Managers:</strong></p>
                                    <ul>
                                        <li ng-repeat="manager in managers">{{manager.first_name}} {{manager.last_name}}</li>
                                    </ul>
					            </div>
				            </div>
			            </div>
		            </div>
		
		            <!-- Player list -->
		            <div class="col-lg-6" ng-show="team.name != null">
            			<div class="panel panel-info">
            				<div class="panel-heading">
                                <a href="#/teams/{{team.id}}/add-player" ng-show="is_owner(team.owner_id, profile.id) || is_manager(profile.id)" class="btn btn-default btn-xs pull-right" type="button">
                                    <i class="fa fa-user"></i> Add Player
                                </a>
                            	<h3 class="panel-title">Players</h3>
                          	</div>
                          	<div class="panel-body">
                          	
                          	    <div class="list-group" ng-show="players.length == 0">
                          			<div class="list-group-item">
                          				There are no players on this team
            						</div>
            					</div>
                          	
                            	<div class="list-group" ng-repeat="player in players" ng-mouseenter="hover(player)" ng-mouseleave="hover(player)">
                              		<div class="list-group-item">

                                        <div class="btn-group pull-right" ng-show="(is_owner(team.owner_id, profile.id) || is_manager(team, profile.id)) && player.showDelete">
                                            <button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown">
                                                <i class="fa fa-cog"></i><span class="caret"></span>
                                            </button>
                                            
                                            <ul class="dropdown-menu" role="menu">
                                                <li><a href="#/teams/{{team.id}}/players/{{player.id}}/edit"><i class="fa fa-pencil"></i> Edit</a></li>
                                                <li><a href="" ng-click="delete(player)"><i class="fa fa-trash-o"></i> Remove From Team</a></li>
                                                <li ng-show="player.manager === true"><a href="" ng-click="remove_manager(player)">Remove as Manager</a></li>
                                                <li ng-show="player.manager === false"><a href="" ng-click="add_manager(player)">Add as Manager</a></li>
                                            </ul>
                                        </div>
    
            							<span class="label label-primary pull-right center-vertical" ng-show="player.player_type == 'Regular'">Regular</span>
            							<span class="label label-warning pull-right center-vertical" ng-show="player.player_type == 'Sub'">Sub</span>
                                		<gravatar-image data-gravatar-email="player.user.email" data-gravatar-size="36" data-gravatar-default="mm"></gravatar-image>
                                		<strong>{{player.user.first_name}} {{player.user.last_name}}</strong> <small>({{player.user.email}})</small>
                              		</div>
                            	</div>
                            	<!-- <div class="text-right">
                              		<a href="#">View All Teams <i class="fa fa-arrow-circle-right"></i></a>
                            	</div> -->
            				</div>
            			</div>
		            </div>
                </tab>
            
                <!-- Events tab -->
                <tab heading="Events" select="onEventTabClick()">
                    <div class="col-lg-4">
            			<div class="panel panel-info">
            				<div class="panel-heading">
            				    
                            	<a href="#/teams/{{teamId}}/events" ng-show="is_owner(team.owner_id, profile.id) || is_manager(team, profile.id)" class="btn btn-default btn-xs pull-right" type="button" ><i class="fa fa-calendar-o"></i> Create Event</a>
                            	<h3 class="panel-title inline">Upcoming Events</h3>
                          	</div>
                          	
                          	<div class="panel-body">

                          		<div class="list-group" ng-show="events.length == 0">
                          			<div class="list-group-item">
                          				There are no upcoming events for this team
            						</div>
            					</div>
                          	
                          		<div class="list-group" ng-repeat="event in events" ng-mouseenter="hover(event)" ng-mouseleave="hover(event)">
                          		
                          		    <!-- RSVP Button -->
                          		    <div class="btn-group pull-right rsvp-pill" ng-show="is_player(profile.id)">
                          		    
                          		        <!-- Edit button when hovered -->
                                        <a class="btn btn-default btn-xs pull-right" href="#/teams/{{team.id}}/events/{{event.id}}/edit" ng-show="(is_owner(team.owner_id, profile.id) || is_manager(team, profile.id)) && event.showDelete">
                                            <i class="fa fa-pencil"></i> Edit
                                        </a>
                          		    
                          		        <button type="button" class="btn btn-xs btn-info dropdown-toggle" data-toggle="dropdown">
                                            <i class="fa fa-check"></i> RSVP
                                            <span class="caret"></span>
                                        </button>
                                    	<ul class="dropdown-menu">
                                            <li>
                                                <a href="" ng-click="rsvp(event.id, 2)" >Yes</a>
                                                <a href="" ng-click="rsvp(event.id, 3)" >Probably</a>
                                                <a href="" ng-click="rsvp(event.id, 4)" >Maybe</a>
                                                <a href="" ng-click="rsvp(event.id, 5)" >No</a>
                                    	    </li>
                                    	</ul>
                                    </div>
                          		
            						<a class="list-group-item" id="{{event.id}}" ng-class="activeClass(event)" ng-click="getResponses(event.id, event.name); activateEvent(event); getEmails(event.id)">
                                    	<h3>{{event.name}}</h3>
                    	                <p><span class="text-danger">{{event.start | date:'EEEE MMMM d, y @ h:mm a'}}</span></p>
                    	                <p  ng-show="is_player(profile.id)"><strong>Your Response:</strong> <span class="label label-{{event.my_response | lowercase}}">{{event.my_response}}</span></p>
                            		    <p><strong>Description:</strong> {{event.description}}</p>
                            		    <p><strong>Location:</strong> {{event.location}}</p>
                                		<!-- <span class="label label-warning pull-right">Manager</span> -->
            						</a>
            					</div>
            				</div>
            			</div>
            		</div>
            
            		<!-- RSVP Graph -->
		            <div class="col-lg-4">
            			<div class="panel panel-info">
            				<div class="panel-heading">
                            	<h3 class="panel-title">RSVP Chart</h3>
                          	</div>
                          	<div class="panel-body">
                            	<highchart id="chart" config="chartConfig"></highchart>
            				</div>
            			</div>
            		</div>
            		
            		<!-- RSVP Emails -->
            		<div class="col-lg-4" ng-show="is_owner(team.owner_id, profile.id) || is_manager(team, profile.id)">
            			<div class="panel panel-info">
            				<div class="panel-heading">
                            	<a href="#/teams/{{teamId}}/events/{{selected.id}}/emails" class="btn btn-default btn-xs pull-right" type="button" ><i class="fa fa-envelope"></i> Create RSVP Email</a>
                            	<h3 class="panel-title inline">RSVP Emails</h3>
                          	</div>
                          	
                          	<div class="panel-body">
                          		<div class="list-group" ng-show="!emails || emails.length == 0">
                          			<div class="list-group-item">
                          				There are no emails for this event
            						</div>
            					</div>
                          	
                          		<div class="list-group" ng-repeat="email in emails">
                          		
            						<a class="list-group-item">
                                		<!-- <span class="badge">just now</span> -->
                                	
                                    	<h3>{{email.title}}</h3>
                                	
                            		    <p><strong>Description:</strong> {{email.content}}</p>
                                		<!-- <span class="label label-warning pull-right">Manager</span> -->
            						</a>
            					</div>
                            
            				</div>
            			</div>
            		</div>
            		
            		<!-- RSVP Breakdown -->
            		<div class="col-lg-4">
            			<div class="panel panel-info">
            				<div class="panel-heading">
                            	<h3 class="panel-title">RSVP Breakdown</h3>
                          	</div>
                          	<div class="panel-body">
                          	    <div class="list-group" ng-show="!responses || responses.length == 0">
                          			<div class="list-group-item">
                          				There are no RSVP responses for this event
            						</div>
            					</div>
                          	    
                          	    <div ng-show="responses.length > 0">
                                <h3>RSVP Responses for {{selected.name}}</h3>
                                <div class="table-responsive">
                                    <table class="table table-bordered table-hover tablesorter">
                                        <thead>
                                            <tr>
                                                <th ng-click="predicate = 'response.id'; reverse=!reverse"><a href="">Response <i class="fa fa-sort"></i></a></th>
                                                <th ng-click="predicate = 'player_id'; reverse=!reverse"><a href="">Name <i class="fa fa-sort"></i></a></th>
                                                <th ng-click="predicate = 'comment'; reverse=!reverse"><a href="">Comment <i class="fa fa-sort"></i></a></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr class="" ng-repeat="res in responses | orderBy:predicate:reverse">
                                                <td><span class="label label-{{res.response.label | lowercase}}">{{res.response.label}}</span></td>
                                                <td>{{res.display_name}}</td>
                                                <td>{{res.comment}}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                </div>
            				</div>
            			</div>
            		</div>
                
                </tab>
                
            </tabset>
        </div>
	</div><!-- /.row -->

</div><!-- /#page-wrapper -->